############  General Settings ############
export HISTSIZE=1000000
export SAVEHIST=$HISTSIZE
export HISTFILE=~/.zhistory
export CLICOLOR=1

################ Powerlevel9k ################

DISABLE_AUTO_TITLE='true'

POWERLEVEL9K_INSTALLATION_PATH=$ANTIGEN_BUNDLES/bhilburn/powerlevel9k
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(time dir vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(pyenv rbenv)
POWERLEVEL9K_SHORTEN_DIR_LENGTH=3

# Disable dir/git icons
POWERLEVEL9K_HOME_ICON=''
POWERLEVEL9K_HOME_SUB_ICON=''
POWERLEVEL9K_FOLDER_ICON=''

POWERLEVEL9K_VCS_GIT_ICON=''
POWERLEVEL9K_VCS_STAGED_ICON='\u00b1'
POWERLEVEL9K_VCS_UNTRACKED_ICON='\u25CF'
POWERLEVEL9K_VCS_UNSTAGED_ICON='\u00b1'
POWERLEVEL9K_VCS_INCOMING_CHANGES_ICON='\u2193'
POWERLEVEL9K_VCS_OUTGOING_CHANGES_ICON='\u2191'

# POWERLEVEL9K_PROMPT_ON_NEWLINE=true

################ Antigen ################

source ~/.antigen_lnk/antigen.zsh

antigen use oh-my-zsh

# Plugins
antigen bundle brew
antigen bundle git
antigen bundle sublime
antigen bundle python
antigen bundle ruby
antigen bundle encode64
antigen bundle httpie

# Theme
# antigen theme geoffgarside
# antigen theme bhilburn/powerlevel9k powerlevel9k
antigen theme af-magic

antigen apply

################ Aliases ################

if [[ `uname` == 'Darwin' ]]; then
    alias mysqlstart='mysql.server start'
    alias mysqlstop='mysql.server stop'

    alias shidden='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder'
    alias hhidden='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder'
fi

# Tmux commands.
alias tn='tmux new'
alias tnd='tmux new -s dev'
alias ta='tmux attach #'
alias tad='tmux attach -t dev'

# Redis.
alias start-redis='redis-server /usr/local/etc/redis.conf'

############### Functions ###############

if [[ `uname` == 'Darwin' ]]; then
    # Pass true to enable alternate characters or false to enable repeating keys.
    altcharacters() {
        defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool $1
    }
fi

########## $PATH modifications ##########

# Path definitions are here so that OSX's path_helper doesn't ruin things.
export PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin

export PATH=${PATH}:/opt/X11/include:/opt/X11/bin

# macOS only
if [[ `uname` == 'Darwin' ]]; then
	# Include VSCode binaries on path if we have it installed.
    if [ -e /Applications/Visual\ Studio\ Code.app ]; then
        export PATH=/Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin:${PATH}
    fi

    # Include the Postgres binaries from the latest version of Postgres installed throug
    # Postgres.app. Prevents some inconsistencies with the Homebrew-installed tools.
    if [ -e /Applications/Postgres.app ]; then
        export PATH=/Applications/Postgres.app/Contents/Versions/latest/bin:${PATH}
    fi
fi

######## Miscallaneous Env Vars #########

export GOPATH="$HOME/Development/godev"

############# Setup Scripts #############

# Pyenv
if [ `command -v pyenv` ]; then
    eval "$(pyenv init -)"
fi

# Nvm
export NVM_DIR="$HOME/.nvm"
[ -s "/usr/local/opt/nvm/nvm.sh" ] && . "/usr/local/opt/nvm/nvm.sh"  # This loads nvm
[ -s "/usr/local/opt/nvm/etc/bash_completion.d/nvm" ] && . "/usr/local/opt/nvm/etc/bash_completion.d/nvm"  # This loads nvm bash_completion

########## Load dotfiles_local zsh configs #########

# Source a local zshrc if it exists.
if [ -f ~/.zshrc_local ]; then
    source ~/.zshrc_local
fi
